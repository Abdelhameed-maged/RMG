export default function handler(req, res) {
  const invoices = [
    {
      "id": 1,
      "invoiceNumber": "INV-2024-001",
      "customerName": "Abdullah Al-Rashid",
      "date": "2024-01-15",
      "status": "paid",
      "items": [
        {
          "productId": 1,
          "productName": "Premium Ajwa Dates",
          "quantity": 5,
          "price": 85,
          "total": 425
        }
      ],
      "subtotal": 425,
      "tax": 63.75,
      "total": 488.75
    }
  ];

  if (req.method === 'GET') {
    res.status(200).json(invoices);
  } else if (req.method === 'POST') {
    const newInvoice = {
      id: invoices.length + 1,
      ...req.body
    };
    invoices.push(newInvoice);
    res.status(201).json(newInvoice);
  } else if (req.method === 'DELETE') {
    const id = parseInt(req.query.id);
    const index = invoices.findIndex(inv => inv.id === id);
    if (index !== -1) {
      invoices.splice(index, 1);
      res.status(200).json({ message: 'Invoice deleted' });
    } else {
      res.status(404).json({ message: 'Invoice not found' });
    }
  } else {
    res.status(405).json({ message: 'Method not allowed' });
  }
}
